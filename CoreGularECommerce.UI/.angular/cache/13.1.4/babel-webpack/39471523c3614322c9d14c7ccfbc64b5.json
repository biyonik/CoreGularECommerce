{"ast":null,"code":"import _asyncToGenerator from \"I:\\\\Projects\\\\NetCore\\\\CoreGularECommerce\\\\CoreGularECommerce.UI\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport { DeleteProduct } from \"../../contracts/DeleteProduct\";\nimport { SpinnerType } from \"../../base/base.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/common/models/product.service\";\nimport * as i2 from \"ngx-spinner\";\nexport class DeleteDirective {\n  constructor(element, _renderer, productService, spinner) {\n    this.element = element;\n    this._renderer = _renderer;\n    this.productService = productService;\n    this.spinner = spinner;\n    this.callback = new EventEmitter();\n\n    const div = _renderer.createElement('div');\n\n    div.setAttribute('class', 'tooltip');\n    div.setAttribute('data-tip', 'Sil');\n    div.setAttribute('style', 'cursor: pointer');\n    const innerHtmlVal = `<button title=\"Sil\" class=\"btn btn-circle btn-outline btn-error\" type=\"button\">\n                            <svg (click)=\"$event.stopPropagation()\" xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\"\n                                 stroke=\"currentColor\">\n                              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n                            </svg>\n                          </button>`;\n    div.innerHTML = innerHtmlVal;\n\n    _renderer.appendChild(element.nativeElement, div);\n  }\n\n  onClick() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.spinner.show(SpinnerType.BallScaleMultiple);\n      const tableRow = _this.element.nativeElement.parentElement.parentElement;\n      const fadeEffect = setInterval(() => {\n        if (!tableRow.style.opacity) {\n          tableRow.style.opacity = String(1);\n        }\n\n        if (tableRow.style.opacity > String(0)) {\n          // @ts-ignore\n          tableRow.style.opacity -= 0.1;\n        } else {\n          clearInterval(fadeEffect);\n        }\n      }, 100);\n      setTimeout(() => {\n        tableRow.remove();\n      }, 600);\n      const deleteProduct = new DeleteProduct();\n      deleteProduct.id = _this.id;\n      yield _this.productService.delete(deleteProduct);\n\n      _this.callback.emit();\n\n      yield _this.spinner.hide(SpinnerType.BallScaleMultiple);\n    })();\n  }\n\n}\n\nDeleteDirective.ɵfac = function DeleteDirective_Factory(t) {\n  return new (t || DeleteDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.NgxSpinnerService));\n};\n\nDeleteDirective.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: DeleteDirective,\n  selectors: [[\"\", \"appDelete\", \"\"]],\n  hostBindings: function DeleteDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"click\", function DeleteDirective_click_HostBindingHandler() {\n        return ctx.onClick();\n      });\n    }\n  },\n  inputs: {\n    id: \"id\"\n  },\n  outputs: {\n    callback: \"callback\"\n  }\n});","map":{"version":3,"sources":["I:/Projects/NetCore/CoreGularECommerce/CoreGularECommerce.UI/src/app/directives/admin/delete.directive.ts"],"names":["EventEmitter","DeleteProduct","SpinnerType","i0","i1","i2","DeleteDirective","constructor","element","_renderer","productService","spinner","callback","div","createElement","setAttribute","innerHtmlVal","innerHTML","appendChild","nativeElement","onClick","show","BallScaleMultiple","tableRow","parentElement","fadeEffect","setInterval","style","opacity","String","clearInterval","setTimeout","remove","deleteProduct","id","delete","emit","hide","ɵfac","DeleteDirective_Factory","t","ɵɵdirectiveInject","ElementRef","Renderer2","ProductService","NgxSpinnerService","ɵdir","ɵɵdefineDirective","type","selectors","hostBindings","DeleteDirective_HostBindings","rf","ctx","ɵɵlistener","DeleteDirective_click_HostBindingHandler","inputs","outputs"],"mappings":"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","sourcesContent":["import { EventEmitter } from '@angular/core';\r\nimport { DeleteProduct } from \"../../contracts/DeleteProduct\";\r\nimport { SpinnerType } from \"../../base/base.component\";\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../../services/common/models/product.service\";\r\nimport * as i2 from \"ngx-spinner\";\r\nexport class DeleteDirective {\r\n    constructor(element, _renderer, productService, spinner) {\r\n        this.element = element;\r\n        this._renderer = _renderer;\r\n        this.productService = productService;\r\n        this.spinner = spinner;\r\n        this.callback = new EventEmitter();\r\n        const div = _renderer.createElement('div');\r\n        div.setAttribute('class', 'tooltip');\r\n        div.setAttribute('data-tip', 'Sil');\r\n        div.setAttribute('style', 'cursor: pointer');\r\n        const innerHtmlVal = `<button title=\"Sil\" class=\"btn btn-circle btn-outline btn-error\" type=\"button\">\n                            <svg (click)=\"$event.stopPropagation()\" xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\"\n                                 stroke=\"currentColor\">\n                              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n                            </svg>\n                          </button>`;\r\n        div.innerHTML = innerHtmlVal;\r\n        _renderer.appendChild(element.nativeElement, div);\r\n    }\r\n    async onClick() {\r\n        await this.spinner.show(SpinnerType.BallScaleMultiple);\r\n        const tableRow = this.element.nativeElement.parentElement.parentElement;\r\n        const fadeEffect = setInterval(() => {\r\n            if (!tableRow.style.opacity) {\r\n                tableRow.style.opacity = String(1);\r\n            }\r\n            if (tableRow.style.opacity > String(0)) {\r\n                // @ts-ignore\r\n                tableRow.style.opacity -= 0.1;\r\n            }\r\n            else {\r\n                clearInterval(fadeEffect);\r\n            }\r\n        }, 100);\r\n        setTimeout(() => {\r\n            tableRow.remove();\r\n        }, 600);\r\n        const deleteProduct = new DeleteProduct();\r\n        deleteProduct.id = this.id;\r\n        await this.productService.delete(deleteProduct);\r\n        this.callback.emit();\r\n        await this.spinner.hide(SpinnerType.BallScaleMultiple);\r\n    }\r\n}\r\nDeleteDirective.ɵfac = function DeleteDirective_Factory(t) { return new (t || DeleteDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.NgxSpinnerService)); };\r\nDeleteDirective.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: DeleteDirective, selectors: [[\"\", \"appDelete\", \"\"]], hostBindings: function DeleteDirective_HostBindings(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵlistener(\"click\", function DeleteDirective_click_HostBindingHandler() { return ctx.onClick(); });\r\n    } }, inputs: { id: \"id\" }, outputs: { callback: \"callback\" } });\r\n"]},"metadata":{},"sourceType":"module"}